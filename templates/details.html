<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Travel Spots</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.min.css">
    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap-theme.min.css">

    <!-- Custom styles for this template -->
    <link href="{{ STATIC_URL }}css/carousel.css" rel="stylesheet">

    <style type="text/css">
      html { height: 100% }
      body { height: 100%; }
    </style>

    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>

    <script type="text/javascript">

    function initialize() {

    //var myLatlng = new google.maps.LatLng(25.04195,121.519028);

    var mapOptions = {
        //center: myLatlng,
        zoom: 12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: true,
        mapTypeControlOptions: {
          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        zoomControl: true,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.SMALL
        }
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
    var bounds = new google.maps.LatLngBounds();
/*
    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Hello World!'
    });
*/

        {% for mData in contents %}
            var lat = "{{mData.latitude}}";
            var lng = "{{mData.longitude}}";
            var name = "{{mData.name}}";
            var category = "{{mData.category}}";
            var LatLng = new google.maps.LatLng(lat, lng);
            addSite(map,lat,lng,name,category);
            bounds.extend(LatLng);
        {% endfor %}
        map.fitBounds(bounds);

    }

google.maps.event.addDomListener(window, 'load', initialize);

function addSite(map, lat, lng, name, category) {
    var pt = new google.maps.LatLng(lat,lng);

    var marker = new google.maps.Marker({
        position: pt,
        map: map,
        title: name
    });

    attachSecretMessage(marker, name, category, lat, lng);
}

var prev_infowindow = null;
function attachSecretMessage(marker, name,category,lat,lng) {
  var infowindow = new google.maps.InfoWindow({
    content:
            "景點名稱：" + name
    + "<br />景點類型：" + category
    + "<br />緯度：" + lat
    + "<br />經度：" + lng
  });
  google.maps.event.addListener(marker, 'click', function() {
    if (prev_infowindow != null) prev_infowindow.close();
    prev_infowindow = infowindow;
    infowindow.open(marker.get('map'), marker);
  });
}

</script>

<script>


</script>

</head>

<body onload="initialize() " >

<div class="navbar-wrapper">
    <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" >Travel Spots</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="{% url 'spots.views.datainfo' 'About' %}#01">About</a></li>
                <li><a href="{% url 'spots.views.datainfo' 'Contact' %}#01">Contact</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">List of cities<span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
{% for city_name in cities %}
<li > <a href="{% url 'spots.views.choosecity' city_name %}#01" target="_top">{{city_name}}</a> </li>
{% endfor %}
                  </ul>
                </li>
                <li >
            <form class="navbar-form navbar-right" action="/SpotSearch/" method="get">
                <div class="form-group">
                    <input name="spot_search" type="text" class="form-control" placeholder="Search...">
                </div>
                <button class="btn btn-default" type="submit">Search</button>
            </form>
                </li>
              </ul>
            </div>
          </div>
        </nav>

    </div>
</div>

<!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img src="https://farm9.staticflickr.com/8592/15943917579_50c389d200_o.jpg">
          <div class="container">
            <div class="carousel-caption">
              <h1>台北市</h1>
              <p>台北市的歷史始於1884年臺北城建立，是臺灣近代歷史的發展舞臺，集許多臺灣文化與人文地景之大成，並與鄰近的東亞城市長年在國際競爭力等項目互有高低、互見短長，是臺灣最國際化、最具國際知名度的都市。</p>
              <p><a class="btn btn-lg btn-primary" href="{% url 'spots.views.choosecity' '台北市' %}#01" role="button">Go to Taipei</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="https://farm4.staticflickr.com/3867/15160921880_ed24a65f93_b.jpg" alt="Second slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>台中市</h1>
              <p>台中市轄區原分屬臺灣省轄內之臺中市及臺中縣，於2010年12月25日合併升格為直轄市，為臺灣第三大都市。其為臺灣的發展核心，並與與鄰近的彰化縣部分地區構成的台中彰化都會區。</p>
              <p><a class="btn btn-lg btn-primary" href="{% url 'spots.views.choosecity' '台中市' %}#01" role="button">Go to Taichung</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="http://static.panoramio.com/photos/large/115488367.jpg" alt="Third slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>高雄市</h1>
              <p>高雄自19世紀末開港，日治時代發展為港埠城市與軍事要地，並在20世紀中葉後成為南臺灣政治、經濟及交通中樞，有「港都」之稱。高雄在2012年GaWC的世界級城市排為可自足等級。</p>
              <p><a class="btn btn-lg btn-primary" href="{% url 'spots.views.choosecity' '高雄市' %}#01" role="button">Go to Kaohsiung</a></p>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div><!-- /.carousel -->


<div class="container">
<div id="01"></div>
    <div class="panel panel-info" align="center">
    <div class="panel-heading">
        <h3 class="panel-title">{{title}}{{title_zone}}</h3>
    </div>
        <div class="panel-body">
        <div class="panel-group" id="accordion" >
        {% for choose in contents %}
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#{{choose.name}}">{{choose.name}}</a>
            </h4>
          </div>
          <div id="{{choose.name}}" class="panel-collapse collapse">
            <div class="panel-body" >
            <p>{{choose.category}}</p>
            <p>{{choose.address}}</p>
            <p>{{choose.telephone}}</p>
            <p>{{choose.content}}</p>
            <p><iframe width="280" height="280" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src=http://maps.google.com.tw/maps?f=q&hl=zh-TW&geocode=&q={{choose.latitude}},{{choose.longitude}}({{choose.name}})&z=16&output=embed&t=p></iframe></p>
            </div>
          </div>
        </div>
        {% endfor %} 
        </div><!-- /accordion -->
        </div>
    </div>

    <ul class="pager">
        <li><a href="{% url 'spots.views.choosecity' title %}">Previous</a></li>
    </ul>

</div> <!-- /container -->


    <div id="map_canvas" style=" width:80%; height:50%; margin:0 auto;"></div>


<div class="container">
<!-- FOOTER -->
<footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>&copy; 2015 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
</footer>

</div> <!-- /container -->

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>

</body>
</html>
